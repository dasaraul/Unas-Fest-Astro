---
import { navMenu } from '../data/navMenu';
import Logo from '../assets/icons/unasfest-logo.png';
---

<header class="sticky top-0 z-[99] flex h-full w-full bg-[#FFFAF0] duration-200">
  <div class="border-[rgba(0, 0, 0, 0.10)] h-[80px] w-full border-b-2 border-solid">
    <div class="container z-50 flex h-full w-full items-center justify-between">
      <a href="/" class="flex cursor-pointer items-center">
        <img
          src={Logo.src}
          alt="unasfest logo"
          width="190"
          height="56"
          class="h-[40px] w-[120px] object-contain md:h-[56px] md:w-[190px]"
        />
      </a>
      
      <nav class="hidden md:block">
        <ul class="flex items-center gap-10">
          {navMenu.map((item) => (
            <li>
              {!item.child ? (
                <a href={item.path} class="nav relative cursor-pointer font-medium text-black opacity-60 hover:text-active-blue hover:opacity-100">
                  {item.title}
                </a>
              ) : (
                <div class="relative group">
                  <button class="nav relative cursor-pointer font-medium text-black opacity-60 hover:text-active-blue hover:opacity-100 flex items-center">
                    {item.title}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1 h-3 w-3 transition duration-200 group-hover:rotate-180">
                      <path d="m6 9 6 6 6-6"/>
                    </svg>
                  </button>
                  <div class="absolute left-0 top-full hidden w-[300px] bg-white shadow-lg group-hover:block z-50">
                    <ul class="py-2">
                      {item.child?.map((childItem) => (
                        <li>
                          <a href={childItem.href} class="block p-3 hover:bg-accent hover:bg-opacity-10">
                            {childItem.name}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              )}
            </li>
          ))}
        </ul>
      </nav>
      
      <!-- Mobile menu button -->
      <button id="menu-button" class="md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#004AAD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" x2="20" y1="12" y2="12"/>
          <line x1="4" x2="20" y1="6" y2="6"/>
          <line x1="4" x2="20" y1="18" y2="18"/>
        </svg>
      </button>
      
      <!-- Mobile menu -->
      <div id="mobile-menu" class="fixed inset-0 z-[100] hidden bg-white">
        <div class="container flex h-full flex-col">
          <div class="flex items-center justify-between py-4">
            <a href="/" class="flex cursor-pointer items-center">
              <img 
                src={Logo.src} 
                alt="unasfest logo" 
                width="190" 
                height="56" 
                class="h-[40px] w-[120px] object-contain md:h-[56px] md:w-[190px]"
              />
            </a>
            <button id="close-menu">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#004AAD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18"/>
                <path d="m6 6 12 12"/>
              </svg>
            </button>
          </div>
          <ul class="flex flex-col gap-8 py-10">
            {navMenu.map((item) => (
              <li>
                {!item.child ? (
                  <a href={item.path} class="text-2xl font-medium">
                    {item.title}
                  </a>
                ) : (
                  <div class="relative">
                    <div class="flex items-center justify-between">
                      <span class="text-2xl font-medium">{item.title}</span>
                      <button class="mobile-dropdown-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="m6 9 6 6 6-6"/>
                        </svg>
                      </button>
                    </div>
                    <ul class="mobile-dropdown-content hidden pl-4 pt-4">
                      {item.child?.map((childItem) => (
                        <li class="py-2">
                          <a href={childItem.href} class="text-xl">
                            {childItem.name}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  document.getElementById('menu-button')?.addEventListener('click', () => {
    document.getElementById('mobile-menu')?.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  });
  
  document.getElementById('close-menu')?.addEventListener('click', () => {
    document.getElementById('mobile-menu')?.classList.add('hidden');
    document.body.style.overflow = '';
  });
  
  // Mobile dropdowns
  document.querySelectorAll('.mobile-dropdown-button').forEach((button) => {
    button.addEventListener('click', (e) => {
      const content = e.currentTarget.parentElement?.nextElementSibling;
      content?.classList.toggle('hidden');
    });
  });
</script>

<style>
  .nav::after {
    @apply absolute -bottom-2 left-0 h-1 w-[0%] rounded-sm bg-active-blue duration-300 content-[''];
  }

  .nav:hover::after {
    @apply w-[90%];
  }
  
  /* Untuk halaman aktif */
  .nav-active::after {
    @apply absolute -bottom-2 left-0 h-1 w-[90%] rounded-sm bg-active-blue duration-100 content-[''];
  }
</style>