---
import MainLayout from '../../layouts/MainLayout.astro';
import { Image } from 'astro:assets';
import { Activities } from '../../data/activities.js';
import InfiniteSlidingComponent from '../../components/InfiniteSlidingComponent.astro';
import FaqActivities from '../../components/FaqActivities.astro';
import Judges from '../../components/Judges.astro';
import Contact from '../../components/Contact.astro';
import TimelineCards from '../../components/TimelineCards.astro';
import Slider from '../../components/Slider.astro';

export async function getStaticPaths() {
  return Activities.map((activity) => {
    return {
      params: { slug: activity.slug },
      props: { activity },
    };
  });
}

const { activity } = Astro.props;

const {
  name,
  description,
  cover,
  slider,
  faqs,
  requirements,
  prizes,
  infiniteSlide,
  contactNumber,
  contact,
  judges,
  registration,
  timelines,
} = activity;
---

<MainLayout title={`${name} - UNAS FEST`} description={description}>
  <div class="container mx-auto px-4 md:px-0 mt-8 mb-20">
    <!-- Hero Section -->
    <div class="flex flex-col lg:flex-row gap-8 items-center mb-16">
      <div class="lg:w-1/2">
        <h1 class="text-3xl md:text-5xl font-bold mb-4">{name}</h1>
        <p class="text-gray-700 mb-6">{description}</p>
        
        {registration && (
          <div class="flex flex-wrap gap-4">
            {registration.map((button) => (
              <a 
                href={button.link} 
                class={`px-6 py-3 rounded-lg font-medium ${
                  button.primary 
                    ? 'bg-primary text-white hover:bg-primary-dark' 
                    : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                }`}
                target={button.external ? "_blank" : "_self"}
              >
                {button.text}
              </a>
            ))}
          </div>
        )}
      </div>
      
      <div class="lg:w-1/2">
        <Image 
          src={cover} 
          alt={name}
          class="w-full h-auto rounded-lg shadow-lg"
        />
      </div>
    </div>
    
    <!-- Timeline Section -->
    {timelines && (
      <div class="mb-16">
        <TimelineCards 
          title="Competition Timeline" 
          description="Mark these important dates" 
          timelines={timelines}
        />
      </div>
    )}
    
    <!-- Slider Section -->
    {slider && slider.length > 0 && (
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-center mb-8">About the Competition</h2>
        <div class="max-w-4xl mx-auto">
          <Slider props={slider} />
        </div>
      </div>
    )}
    
    <!-- Requirements Section -->
    {requirements && (
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-center mb-8">Requirements</h2>
        <div class="max-w-4xl mx-auto">
          <Slider props={requirements} />
        </div>
      </div>
    )}
    
    <!-- Prizes Section -->
    {prizes && (
      <div class="mb-16 bg-gray-50 py-12 px-4 rounded-lg">
        <h2 class="text-3xl font-bold text-center mb-8">Prizes & Benefits</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
          {prizes.map((prize, index) => (
            <div class={`text-center p-6 rounded-lg shadow-md ${
              index === 0 
                ? 'bg-yellow-50 border-2 border-yellow-400' 
                : index === 1 
                  ? 'bg-gray-50 border-2 border-gray-400' 
                  : 'bg-amber-50 border-2 border-amber-400'
            }`}>
              <div class="text-4xl font-bold mb-2">{prize.position}</div>
              <div class="text-2xl font-semibold mb-4">{prize.amount}</div>
              {prize.additional && (
                <ul class="text-left text-sm">
                  {prize.additional.map((item) => (
                    <li class="flex items-start mb-2">
                      <span class="text-green-500 mr-2">âœ“</span>
                      <span>{item}</span>
                    </li>
                  ))}
                </ul>
              )}
            </div>
          ))}
        </div>
      </div>
    )}
    
    <!-- Infinite Sliding Component -->
    {infiniteSlide && (
      <div class="mb-16">
        <InfiniteSlidingComponent props={infiniteSlide} />
      </div>
    )}
    
    <!-- Judges Section -->
    {judges && judges.length > 0 && (
      <div class="mb-16">
        <Judges judgesData={judges} />
      </div>
    )}
    
    <!-- FAQs Section -->
    {faqs && faqs.length > 0 && (
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-center mb-8">Frequently Asked Questions</h2>
        <FaqActivities faqs={faqs} />
      </div>
    )}
    
    <!-- Contact Section -->
    {contact && (
      <div class="mb-16">
        <Contact contact={contact} contactNumber={contactNumber} />
      </div>
    )}
  </div>
</MainLayout>